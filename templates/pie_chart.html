{% extends "base.html" %}

{% block title %}Pie Chart - IoT Dashboard{% endblock %}

{% block content %}
  <h2>Device Status Distribution</h2>
  <p>
    This chart shows the distribution of device statuses across all IoT devices
    (using static data).
  </p>

  <div class="chart-container">
    <canvas id="pieChart"></canvas>
  </div>

  <script>
    // Fetch data from our Flask API endpoint and use it in Chart.js
    fetch('/api/pie-data')
      .then(response => response.json())
      .then(data => {
        const ctx = document.getElementById('pieChart').getContext('2d');
        new Chart(ctx, {
          type: 'pie',
          data: data,
          options: {
            responsive: true,
            plugins: {
              legend: {
                display: true,
                position: 'top',
              },
              title: {
                display: true,
                text: 'IoT Device Status Overview'
              }
            }
          }
        });
      });
  </script>
{% endblock %}
